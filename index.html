<!DOCTYPE html>
<html lang="en" dir="auto" prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>Tuwa - Web Player</title>
    <meta name="application-name" content="Tuwa">
    <meta name="apple-mobile-web-app-title" content="Tuwa">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Listen to premium content with distraction-free viewing. OpenTuwa">
    <meta name="author" content="Tuwa Media">
    <link rel="manifest" href="manifest.json">
    <link type="text/plain" rel="author" href="humans.txt" />

    <meta property="og:site_name" content="Tuwa">
    <meta property="og:title" content="Tuwa - Web Player: Sight for everyone">
    <meta property="og:description" content="Listen to premium content with distraction-free viewing. A brand of Tuwa Media.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://Quran-lite.pages.dev/social-preview.png"> 
    <meta property="og:image" content="assets/og-image.jpg"> <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Tuwa",
      "alternateName": "Tuwa Audio",
      "headline": "Sight for everyone",
      "operatingSystem": "Web, iOS, Android",
      "applicationCategory": "MusicApplication",
      "genre": "Music & Audio",
      "description": "Premium content platform with distraction-free viewing. A brand of Tuwa Media.",
      "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock"
  },
      "author": {
        "@type": "Organization",
        "name": "Tuwa Media",
        "url": "https://www.Quran-lite.pages.dev"
      },
      "copyrightHolder": {
        "@type": "Organization",
        "name": "Tuwa Media"
      },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "ratingCount": "32000000"
  },
  "downloadUrl": "https://www.Quran-lite.pages.dev/download"
}
    }
    </script>
<script>
window.addEventListener('DOMContentLoaded', () => {
    // Check for "chapter" in the URL (handles ?chapter= and ?chapter)
    const urlParams = new URLSearchParams(window.location.search);
    
    if (urlParams.has('regex')) {
        const brandElements = document.querySelectorAll('.app-brand');
        
        brandElements.forEach(el => {
            // Using !important to override the 'display: flex' in your CSS
            el.style.setProperty('display', 'none', 'important');
        });
        
        // Optional: Console log to verify it triggered
        console.log('Chapter detected: .app-brand hidden.');
    }
});
</script>
    
    <link rel="canonical" id="dynamic-canonical" href="https://Quran-lite.pages.dev">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://everyayah.com">
    <link rel="preconnect" href="https://raw.githubusercontent.com">
    <link rel="icon" type="image/png" sizes="128x128" href="assets/ui/web.png">
<link rel="shortcut icon" href="assets/ui/web.ico">
<link rel="apple-touch-icon" href="assets/ui/apple-touch-icon.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;900&family=Amiri:wght@400;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;900&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    </noscript>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
    <script src="src/ui/error-handling-img.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PDWXFDCQRH"></script>
    <link id="main-css" rel="stylesheet" href="styles/index1.css" fetchpriority="high">
    <link id="custom-select-css" rel="stylesheet" href="styles/custom-select.css" fetchpriority="high"> <link rel="stylesheet" href="styles/arabic-modal.css">
    <link rel="stylesheet" href="styles/user-select.css">
    <link rel="stylesheet" href="styles/inline-styles.css">
    <script src="src/utils/i18n-loader.js"></script>
    <script src="src/utils/analytics.js"></script>
    <script src="src/utils/github-redirect.js"></script>
<script> 
(function() {
    const css = `
      #_universal_loader {
        position: fixed;
        top: 0; left: 0; width: 100vw; height: 100vh;
        background-color: #000000;
        z-index: 2147483647;
        opacity: 1;
        /* Background fades out slightly slower so we see the light show */
        transition: opacity 0.8s ease-out 0.2s; 
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }
       
      .wave-container {
        position: relative;
        width: 100%;
        max-width: 600px;
        height: 9000000000000000000000000000000px;
        transform-origin: center center;
        /* The Zoom Transition:
           We use a cubic-bezier that starts slow and snaps fast (The "Punch")
        */
        transition: 
            transform 1.0s cubic-bezier(0.7, 0, 0.3, 1), 
            filter 1.0s ease-in, 
            opacity 1.0s ease-in;
        will-change: transform, filter, opacity;
      }

      /* --- THE BOMBASTIC EXIT STATE --- */
      #_universal_loader.loaded .wave-container {
        transform: scale(15); /* Infinite Zoom */
        /* COMBINATION OF EFFECTS:
           1. Blur: Simulates extreme speed
           2. Brightness 600%: The "Flash" (Light Source)
           3. Drop-shadow: Adds the glowing aura
        */
        filter: blur(8px) brightness(90000%) drop-shadow(0 4px 30px rgba(0,0,0,1));
        opacity: 0.8;
        color: #000000;
      }

      /* --- WARP SPEED ACCELERATION --- */
      /* When loaded, we override the animation duration to be incredibly fast (0.2s) */
      #_universal_loader.loaded .wave1 { animation: wave_loop 0.2s linear infinite !important; }


      .wave-svg {
        position: absolute;
        top: 0;
        left: 0;
        width: 200%;
        height: 100%;
        fill: none;
        stroke-width: 4;
        stroke-linecap: round;
        overflow: visible;
      }

      /* Normal Speed Settings */
      .wave1 { 
          stroke: #fff; 
          opacity: 0.7; 
          animation: wave_loop 4s linear infinite;
          filter: blur(2px) drop-shadow(0 4px 30px rgba(0,0,0,1));
      }


      @keyframes wave_loop {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
      }

      #_universal_loader.loaded {
        opacity: 0;
        pointer-events: none;
      }
    `;

    const style = document.createElement('style');
    style.appendChild(document.createTextNode(css));
    document.head.appendChild(style);

    const overlay = document.createElement('div');
    overlay.id = '_universal_loader';
    
    const container = document.createElement('div');
    container.className = 'wave-container';

    const wavePath = "M0,100 C150,180 350,20 500,100 C650,180 850,20 1000,100 C1150,180 1350,20 1500,100 C1650,180 1850,20 2000,100";

    const createWave = (cls) => {
        const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute("viewBox", "0 0 1000 200");
        svg.setAttribute("preserveAspectRatio", "none");
        svg.setAttribute("class", `wave-svg ${cls}`);
        
        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        path.setAttribute("d", wavePath);
        svg.appendChild(path);
        return svg;
    };

    container.appendChild(createWave('wave1'));

    
    overlay.appendChild(container);
    document.documentElement.appendChild(overlay);

    function revealPage() {
        overlay.classList.add('loaded');
        // Wait for the 1.0s zoom/flash to finish before removing from DOM
        setTimeout(() => {
            if (overlay.parentNode) overlay.parentNode.removeChild(overlay);
        }, 2200); 
    }

    // --- NEW LOGIC START ---
    // Wrapper to handle URL check
    function checkAndReveal() {
        // Check if URL contains '?' (e.g. yyy.com/? or yyy.com?param=1)
        if (window.location.href.indexOf('?') > -1) {
            // Add extra 3 seconds throttle
            setTimeout(revealPage, 1000);
        } else {
            // No '?', reveal normally
            revealPage();
        }
    }

    if (document.readyState === 'complete') {
        checkAndReveal();
    } else {
        window.addEventListener('load', checkAndReveal);
        // Fallback: Force reveal after 8 seconds (passing through check)
        setTimeout(checkAndReveal, 8000);
    }
    // --- NEW LOGIC END ---

})();
</script><script>
  document.addEventListener("DOMContentLoaded", function() {
      // --- CONFIGURATION ---
      const storageKey = 'saved_h1_data'; 
      const targetH2Id = 'doors-hero-title'; 

      // --- HELPER: SAVE AND UPDATE ---
      function syncH1toH2() {
          // 1. Find the current H1 (fresh search every time)
          const currentH1 = document.querySelector('h1');
          const targetH2 = document.getElementById(targetH2Id);
          
          // 2. If we have an H1, save its data
          if (currentH1) {
              const newText = currentH1.innerText.trim();
              
              // Only update if it's actually different to avoid infinite loops
              if (newText && newText !== localStorage.getItem(storageKey)) {
                  localStorage.setItem(storageKey, newText);
                  if (targetH2) targetH2.innerText = newText;
              }
          }
      }

      // --- STEP 1: RESTORE IMMEDIATELY ---
      // Check memory instantly so H2 is not empty on load
      const savedData = localStorage.getItem(storageKey);
      const targetH2 = document.getElementById(targetH2Id);
      if (savedData && targetH2) {
          targetH2.innerText = savedData;
      }

      // --- STEP 2: WATCH THE WHOLE BODY ---
      // We observe 'document.body' so we catch the H1 even if it gets deleted/swapped.
      const observer = new MutationObserver(function(mutations) {
          // Whenever ANYTHING changes in the body, check if we need to sync H1
          syncH1toH2();
      });

      // Start watching everything (Text changes, new elements, etc.)
      observer.observe(document.body, { 
          childList: true, 
          subtree: true, 
          characterData: true 
      });
      
      // Run once at start to catch dynamic H1s that load fast
      syncH1toH2();
  });
</script>



    </head>
<body>
<a href="/" class="app-brand" aria-label="Tuwa Home">
    <div class="brand-icon">
        <img src="assets/ui/logo.png" alt="Tuwa Logo">
    </div>
    <span class="brand-text">Tuwa</span>
</a>

    <script src="src/utils/resolution.js"></script>
    <script src="src/components/recommendations.js"></script>
    <script src="src/components/offline-status.js"></script>
    <script src="src/utils/service-worker-registration.js"></script>
<div id="island-search-wrapper">
    <div class="island-search-box">
        <div class="search-icon-wrapper">

        </div>
        <input type="text" id="island-input" placeholder="Search anything" autocomplete="off">
    </div>

    <button id="island-trigger" class="enter-trigger" tabindex="0">
        <span class="key-hint" data-key="Enter">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
            </svg>
    </button>
</div>

    <nav id="tv-sidebar">
        <a href="#" class="nav-item active" id="nav-home" tabindex="1">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
            <span class="nav-label" data-i18n="nav.home">Home</span>
        </a>
        <a href="#" class="nav-item" id="nav-search" tabindex="2">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
            <span class="nav-label" data-i18n="nav.search">Search</span>
        </a>
        <a href="../" class="nav-item" id="nav-profile" tabindex="3">
            <div class="nav-icon profile-icon">Q</div>
            <span class="nav-label" data-i18n="nav.profile">Profile</span>
        </a>
    </nav>

    <div id="search-overlay">
        <div class="keyboard-section">
            <div id="voice-search-btn" tabindex="0" role="button" data-i18n-aria-label="search.voiceSearch" aria-label="Voice Search">
                <svg viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/><path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/></svg>
            </div>
            <div id="search-input-display"></div>
            <div class="keyboard-grid" id="keyboard-grid"></div>
        </div>
        <div class="results-section">
            <div class="row-header row-header-top-results" data-i18n="dashboard.topResults">Top Results</div>
            <div class="results-grid" id="search-results-grid">
                <div class="no-results" data-i18n="dashboard.useKeyboard">Use the keyboard to describe a topic...</div>
            </div>
        </div>
    </div>



    <div id="dashboard-view" class="active">
        <div class="hero-banner">
            <div class="hero-preview-layer" id="hero-preview-layer">
                <img id="preview-img" class="preview-img" src="" alt="">
            </div>
            <div class="hero-shadow-overlay"></div>
            <div id="hero-subtitle-overlay"></div>

            <div class="hero-content">

                <h1 class="hero-title-text" id="door-hero-title" data-i18n="hero.title"></h1>
                <div class="hero-subtitle" id="door-hero-subtitle" data-i18n="hero.subtitle"></div>
                    
                        <path d="M18.25 12L7.75 5.75V18.25L18.25 12Z" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="row-section row-section-hidden" id="continue-section">
            <div class="row-header" data-i18n="dashboard.continueListening">Continue Listening</div>
            <div class="card-scroller" id="continue-row"></div>
        </div>


        <div class="row-section row-section-padding-bottom">
            <div class="row-header"></div>
            <div class="card-scroller" id="all-row"></div>
        </div>
    </div>

    <audio id="preview-audio" crossorigin="anonymous"></audio>

    <div id="cinema-view">
        <div id="loading-overlay">
            <nav id="splash-footer">

                <h2 class="heroz-title-text" id="doors-hero-title"></h2>
            </nav>
            <div class="loader-content">
                <div class="loader-spinner"></div>
                <div class="loader-text" id="loader-text"></div>
                <button id="start-btn" class="start-btn" data-i18n="player.start">Start</button>
            </div>


        </div>

        <div class="container">
            <audio id="audio-player" crossorigin="anonymous"></audio>
            <audio id="translation-audio-player" crossorigin="anonymous"></audio>

            <h1 id="chapter-title" data-i18n="player.title"></h1>
            
            <div id="content-display">
                <div id="verse-container">
                    <div id="buffering-indicator"></div>
                    <img id="verse-text" class="active-verse-img" alt="Verse" width="600" height="300" loading="eager">
                    <img id="verse-text-next" alt="Next Verse" width="600" height="300" loading="lazy">
                </div>
                <div id="translation-text" dir="auto" data-i18n="loading.selectSurah">Select a Surah...</div>
            </div>
        </div>

        <div id="control-panel">
            <div id="chapterSelectWrapper" class="custom-select-wrapper">
                <button class="custom-select-trigger" tabindex="0" data-i18n="player.selectSurahButton"><span>Select Surah</span></button>
                <div class="custom-options"></div>
            </div>
            
            <div id="verseSelectWrapper" class="custom-select-wrapper">
                <button class="custom-select-trigger" tabindex="0" data-i18n="player.ayah"><span>Ayah</span></button>
                <div class="custom-options"></div>
            </div>

            <div id="reciterSelectWrapper" class="custom-select-wrapper">
                <button class="custom-select-trigger" tabindex="0" data-i18n="player.reciter"><span>Reciter</span></button>
                <div class="custom-options"></div>
            </div>

            <div id="translationSelectWrapper" class="custom-select-wrapper">
                <button class="custom-select-trigger" tabindex="0" data-i18n="player.translation"><span>Translation</span></button>
                <div class="custom-options"></div>
            </div>

            <div id="translationAudioSelectWrapper" class="custom-select-wrapper">
                <button class="custom-select-trigger" tabindex="0" data-i18n="player.audioTrans"><span>Audio Translation</span></button>
                <div class="custom-options"></div>
            </div>
        </div>
    </div>

    <div id="arabic-modal">
        <div class="arabic-modal-card">
            <h2><b data-i18n="arabicModal.question">Do you know how to read Arabic?</b></h2>
            <h3 data-i18n="arabicModal.subtitle">Or you'll simply see only the translation.</h3>
            <div class="arabic-btn-group">
                <button id="btn-arabic-yes" class="arabic-btn" data-i18n="arabicModal.yes">Yes</button>
                <button id="btn-arabic-no" class="arabic-btn" data-i18n="arabicModal.no">No</button>
            </div>
        </div>
    </div>
    <script src="src/core/app.js"></script>
    <script src="src/core/ai-override.js"></script> 
    <script src="src/components/navigation.js"></script> <script src="src/components/arabic-modal-handler.js"></script>
    <script src="src/components/search/voice-search-bridge.js"></script>
    <script src="src/utils/content-protection.js"></script>
    <script src="src/components/search/grid-navigation.js"></script>
    <script src="src/ui/artifact.js"></script>
    <script src="src/ui/all-text-fade.js"></script>
    <div id="transition-fade-layer"></div>
<div id="premium-landing" style="display: none;"> 
    <div class="premium-brand-replica">
        <img src="assets/ui/logo.png" alt="Tuwa Logo">
        <span>Tuwa</span>
    </div>

    <div class="premium-content">
        <a href="/" class="appx-brand" aria-label="Tuwa Home">
            <div class="brand-icon">
                <img src="assets/ui/logo.png" alt="Tuwa Logo">
            </div>
            <span class="brand-text">Tuwa</span>
        </a>
        <h1 class="premium-title">Access to premium content with distraction-free viewing.</h1>
<p class="premium-subtitle">Premium streaming platform — <b>1.5 billion listeners daily</b></p>

<div class="premium-card-wrapper">
    <div class="premium-price-tag">
        <span class="price-period"></span>
        
        <span class="price-big">USD 0</span> 
        
        <div style="margin-top: 1rem; display: flex; flex-direction: column; gap: 4px;">
            <span class="price-term-common" style="color: #fff;">Premium Plan • <b>12 Months</b> (Limited time offer)</span>
            <span class="price-term-common"></span>
        <button id="premium-start-btn" class="premium-btn">Start watching for free</button>
 <nobr><span class="price-term">No credit card needed</span></nobr>
        </div>
    </div>
</div>


        
        <p class="premium-legal-disclaimer">
            *Promotional pricing of USD 0/mo valid for the initial 12-month term. Plan automatically continues at the standard zero-cost rate thereafter. No commitment; cancel anytime. No payment method required.
        </p>
    </div>

    <div class="premium-processing">
        <div class="premium-loader"></div>
        <div class="premium-status-text" id="premium-status">Confirming availability</div>
    </div>


<div id="legal-overlay" class="legal-backdrop">
    <div class="legal-glass-panel">
        <button class="legal-close" onclick="closeLegal()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"></path></svg>
        </button>
        <div id="legal-content-area" class="legal-scroll-content">
            </div>
    </div>
</div>
<style>
/* --- LEGAL OVERLAY SYSTEM --- */
.legal-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 9995; /* Above everything, below Anti-Tamper cursor blockers if any */
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.4s var(--transition-smooth);
    display: flex;
    align-items: center;
    justify-content: center;
}

.legal-backdrop.active {
    opacity: 1;
    pointer-events: all;
}

.legal-glass-panel {
    width: 90%;
    max-width: 600px;
    height: 80vh;
    background: var(--glass-surface, rgba(20, 20, 20, 0.6));
    border: 1px solid var(--glass-border, rgba(255, 255, 255, 0.1));
    border-radius: var(--radius-lg, 24px);
    box-shadow: 0 40px 80px rgba(0,0,0,0.8);
    transform: scale(0.95) translateY(20px);
    transition: transform 0.5s var(--transition-smooth);
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.legal-backdrop.active .legal-glass-panel {
    transform: scale(1) translateY(0);
}

.legal-scroll-content {
    padding: 40px;
    overflow-y: auto;
    color: var(--text);
    font-family: "Plus Jakarta Sans", sans-serif;
    font-size: 1.4rem;
    line-height: 1.8;
}

.legal-scroll-content h2 {
    font-size: 2.4rem;
    margin-bottom: 2rem;
    color: #fff;
    font-weight: 700;
    letter-spacing: -1px;
}

.legal-scroll-content p {
    margin-bottom: 1.5rem;
    color: rgba(255, 255, 255, 0.7);
}

.legal-close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: rgba(255,255,255,0.1);
    border: none;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    color: #fff;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
    z-index: 10;
}

.legal-close:hover { background: rgba(255,255,255,0.25); }

/* MATCHING YOUR SCROLLBAR HIDING PREFERENCE */
.legal-scroll-content::-webkit-scrollbar { display: none; }
.legal-scroll-content { -ms-overflow-style: none; scrollbar-width: none; }
</style>
<script>
const legalData = {
    privacy: `
        <h2>Privacy Policy</h2>
        <p><strong>Effective Date: 2026</strong></p>
        <p>Tuwa Media is committed to "Sight for everyone" while respecting user's digital footprint. This minimal-collection policy ensures your streaming experience remains private.</p>
        <p><strong>1. Data We Collect</strong><br>We only collect necessary data for streaming stability and experience.</p>
        <p><strong>2. Third-Party Analytics</strong><br>No personally identifiable information (PII) is bridged to these sessions.</p>
    `,
    terms: `
        <h2>Terms of Use</h2>
        <p><strong>1. License to Access</strong><br>By accessing Tuwa (OpenTuwa.com - Tuwa Audio), you are granted a limited, non-exclusive license to stream content for personal use.</p>
        <p><strong>2. Anti-Tamper Mechanism</strong><br>This platform is protected by proprietary integrity checks. Attempting to bypass the overlay, inject styles, or manipulate the system constitutes a violation of these terms and will result in immediate access termination.</p>
        <p><strong>3. Intellectual Property</strong><br>All assets, and the "Tuwa", "OpenTuwa" and "Tuwa Audio" brand assets are the exclusive property of Tuwa Media and its partners.</p>
    `,
    cookies: `
        <h2>Cookie Preferences</h2>
        <p>We use a "Strictly Necessary" architecture.</p>
        <p><strong>Essential Cookies:</strong> No user's personal informations are stored.</p>
    `,
    corporate: `
        <h2>Corporate Information</h2>
        <p><strong>Tuwa Media</strong><br>Copyright (C) 2024-2026<br></p>
        <p><strong>Contact:</strong> legal@tuwamedia.com</p>
    `,
    compliance: `
        <h2>Regulatory Compliance</h2>
        <p><strong>GDPR / CCPA</strong><br>As a privacy-first platform, Tuwa Media (OpenTuwa.com) processes data on a legitimate interest basis. You retain the right to request local data erasure by clearing your browser cache.</p>
        <p><strong>Audio Standards</strong><br>Our streaming conforms to standard loudness normalization protocols (-14 LUFS) to ensure auditory safety during prolonged listening.</p>
    `
};

function openLegal(type) {
    const overlay = document.getElementById('legal-overlay');
    const content = document.getElementById('legal-content-area');
    
    // 1. Inject Content
    content.innerHTML = legalData[type] || "<h2>Content Unavailable</h2>";
    
    // 2. Reveal Overlay
    overlay.classList.add('active');
}

function closeLegal() {
    document.getElementById('legal-overlay').classList.remove('active');
}

// Close on backdrop click
document.getElementById('legal-overlay').addEventListener('click', (e) => {
    if (e.target === document.getElementById('legal-overlay')) closeLegal();
});
</script>
<!-- 1. LOAD SUPABASE SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- 2. SOCIAL AUTH STYLES -->
<style>
    #hybrid-auth-modal {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.85); z-index: 2147483647;
        display: none; justify-content: center; align-items: center;
        backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
        opacity: 0; transition: opacity 0.4s ease;
    }
    #hybrid-auth-modal.visible { opacity: 1; pointer-events: all; }
    
    .auth-card {
        background: rgba(20, 20, 20, 0.8);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 24px; padding: 40px; width: 90%; max-width: 400px;
        text-align: center; box-shadow: 0 40px 80px rgba(0,0,0,1);
        display: flex; flex-direction: column; gap: 12px;
        transform: scale(0.95); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    #hybrid-auth-modal.visible .auth-card { transform: scale(1); }
    .auth-card-title {
    font-family: var(--font-heading);
    font-size: clamp(2.5rem, 5vw, 3.5rem); /* Responsive scaling */
    font-weight: 800;
    letter-spacing: -0.03em;
    line-height: 1.1;
    margin: 0;
    background: linear-gradient(180deg, #FFFFFF 10%, #888888 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    }



    .social-btn {
        width: 100%; padding: 14px; border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.1);
        cursor: pointer; font-size: 1rem; font-weight: 600;
        display: flex; align-items: center; justify-content: center; gap: 10px;
        transition: transform 0.2s, background 0.2s;
        color: #fff; font-family: 'Inter', sans-serif;
    }
    .social-btn:hover { transform: scale(1.02); }
    
    /* Brand Colors */
    .btn-google { background: linear-gradient(180deg, #FFFFFF 10%, #888888 100%); 
-webkit-background-clip: text; 
-webkit-text-fill-color: transparent; 
color: #000; }
    .btn-spotify { display: none; background: #1DB954; color: #fff; }
    .btn-facebook { display: none; background: #1877F2; color: #fff; }
    .btn-discord { background: linear-gradient(180deg, #FFFFFF 10%, #888888 100%); 
-webkit-background-clip: text; 
-webkit-text-fill-color: transparent; 
color: #000; }
    .btn-x { display: none; background: #000; border-color: #333; color: #fff; }

    #auth-error { color: #ff4444; font-size: 0.9rem; margin-top: 10px; min-height: 1.2em; display:none;}
    .divider { display: flex; align-items: center; color: #555; margin: 10px 0; font-size: 0.8rem; }
    .divider::before, .divider::after { content: ''; flex: 1; height: 1px; background: #333; }
    .divider span { padding: 0 10px; }
</style>

<!-- 3. SOCIAL LOGIN FORM -->
<div id="hybrid-auth-modal">
    <div class="auth-card">

        <h2 class="auth-card-title" style="color:#fff; margin:0; font-family:'Inter',sans-serif;">Your bespoke premium content is on its way.</h2>
        
        
        <div id="auth-error"></div>

        <button onclick="handleSocialLogin('google')" class="social-btn btn-google">
            <svg width="18" height="18" viewBox="0 0 18 18"><path d="M17.64 9.2c0-.637-.057-1.252-.164-1.841H9v3.481h4.844a4.14 4.14 0 0 1-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z" fill="#4285F4"/><path d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.715H.957v2.332A8.997 8.997 0 0 0 9 18z" fill="#34A853"/><path d="M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332z" fill="#FBBC05"/><path d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z" fill="#EA4335"/></svg>
            Continue with Google
        </button>

        <button onclick="handleSocialLogin('spotify')" class="social-btn btn-spotify">
            <svg width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.669 11.538a.498.498 0 0 1-.686.165c-1.879-1.147-4.243-1.407-7.028-.77a.499.499 0 0 1-.222-.973c3.048-.696 5.662-.397 7.77.892a.5.5 0 0 1 .166.686zm.979-2.178a.624.624 0 0 1-.858.205c-2.15-1.321-5.428-1.704-7.972-.932a.625.625 0 0 1-.362-1.194c2.905-.881 6.517-.454 8.986 1.063a.624.624 0 0 1 .206.858zm.084-2.268C10.154 5.56 5.9 5.419 3.438 6.166a.748.748 0 1 1-.44-1.432c2.868-.87 7.578-.711 10.558 1.055a.747.747 0 1 1-.823 1.299z"/></svg>
            Continue with Spotify
        </button>

        <button onclick="handleSocialLogin('facebook')" class="social-btn btn-facebook">
            <svg width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/></svg>
            Facebook
        </button>

        <button onclick="handleSocialLogin('twitter')" class="social-btn btn-x">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"/></svg>
            X (Twitter)
        </button>

        <button onclick="handleSocialLogin('discord')" class="social-btn btn-discord">
            <svg width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.209.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.05.05 0 0 0 .003.029c.245.466.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"/></svg>
            Discord
        </button>

        <div style="margin-top:20px; font-size:0.8rem; color:#444; cursor:pointer;" onclick="closeAuth()">Cancel</div>
    </div>
</div>
<style>
.btn-discord svg {
    fill: #5865F2; /* Optional: Keep the logo colored for brand recognition */
}
</style>

<script>
(async function() {
    const SUPABASE_URL = 'https://csuyapzneytubzdrdegl.supabase.co'; 
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNzdXlhcHpuZXl0dWJ6ZHJkZWdsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk3MzM1MzMsImV4cCI6MjA4NTMwOTUzM30.m5lhtxB-9Wutmt1E-3mlO8R0KlgE8YNXaPP1_UJF2k0';

    let supabase;
    try {
        const { createClient } = window.supabase;
        supabase = createClient(SUPABASE_URL, SUPABASE_KEY);
    } catch (e) { console.error("Supabase Init Error"); }

    const premiumLayer = document.getElementById('premium-landing');
    const islandSearch = document.getElementById('island-search-wrapper');
    const authModal = document.getElementById('hybrid-auth-modal');
    const authError = document.getElementById('auth-error');
    
    // Animation Elements
    const premiumContent = document.querySelector('.premium-content');
    const premiumProcessing = document.querySelector('.premium-processing');
    const statusText = document.getElementById('premium-status');
    const startBtn = document.getElementById('premium-start-btn');

    // 1. SESSION CHECK & LOGIC BRANCHING
    const { data: { session } } = await supabase.auth.getSession();

    if (session) {
        // LOGGED IN: Show "Choose this plan" -> Run Sequence
        setupPostLoginFlow();
    } else {
        // LOGGED OUT: Show "Start watching for free" -> Open Auth
        setupGuestFlow();
    }

    // --- FLOW HANDLERS ---

    function setupGuestFlow() {
        if (premiumLayer) premiumLayer.style.display = 'flex';
        document.body.classList.add('premium-lockdown');
        toggleIsland(true);
        
        // Bind Guest Click (Open Modal)
        if (startBtn) {
            startBtn.addEventListener('click', () => {
                authModal.style.display = 'flex';
                setTimeout(() => authModal.classList.add('visible'), 10);
            });
        }
    }

    function setupPostLoginFlow() {
        // Ensure landing is still visible (Locked)
        if (premiumLayer) premiumLayer.style.display = 'flex';
        document.body.classList.add('premium-lockdown');
        toggleIsland(true);

        // Update Button Text & Behavior
        if (startBtn) {
            startBtn.innerText = "Choose this plan";
            startBtn.style.background = "#fff"; 
            startBtn.style.color = "#000";
            
            // Clone button to strip previous event listeners cleanly
            const newBtn = startBtn.cloneNode(true);
            startBtn.parentNode.replaceChild(newBtn, startBtn);
            
            // Bind New Action (Run OTT Sequence)
            newBtn.addEventListener('click', runOTTSequence);
        }

        // Hide "No credit card needed" for a cleaner look
        const term = document.querySelector('.price-term');
        if (term) term.style.visibility = 'hidden';
    }

    function runOTTSequence() {
        // 1. Fade out the pricing card
        if (premiumContent) premiumContent.classList.add('fade-out');
        
        // 2. Activate Processing View
        if (premiumProcessing) {
            premiumProcessing.style.display = 'flex';
            setTimeout(() => premiumProcessing.classList.add('active'), 100);
        }

        // 3. The Sequence Steps
        const steps = [
            { text: "Confirming subscription...", delay: 500 },
            { text: "Verifying secure token...", delay: 2000 },
            { text: "Personalizing experience...", delay: 3500 },
            { text: "Setting up library...", delay: 5000 },
            { text: "Ready", delay: 6000 }
        ];

        // Execute Steps
        steps.forEach(step => {
            setTimeout(() => {
                if (statusText) {
                    // Simple fade effect on text change
                    statusText.style.opacity = 0;
                    setTimeout(() => {
                        statusText.innerText = step.text;
                        statusText.style.opacity = 1;
                    }, 200);
                }
            }, step.delay);
        });

        // 4. Final Unlock
        setTimeout(() => {
            unlockSite();
        }, 6500);
    }

    // --- SHARED UTILS ---

    window.handleSocialLogin = async (provider) => {
        authError.style.display = 'none';
        try {
            const { data, error } = await supabase.auth.signInWithOAuth({
                provider: provider,
                options: { redirectTo: window.location.href }
            });
            if (error) throw error;
        } catch (err) {
            authError.style.display = 'block';
            authError.innerText = "Error: " + err.message;
        }
    };

    window.closeAuth = () => {
        authModal.classList.remove('visible');
        setTimeout(() => authModal.style.display = 'none', 300);
    };

    function unlockSite() {
        // Fade out the whole landing layer
        if (premiumLayer) {
            premiumLayer.style.transition = 'opacity 0.8s ease';
            premiumLayer.style.opacity = '0';
            setTimeout(() => {
                premiumLayer.remove();
                document.body.classList.remove('premium-lockdown');
                toggleIsland(false);
                window.dispatchEvent(new Event('resize'));
            }, 800);
        }
    }

    function toggleIsland(hide) {
        if (!islandSearch) return;
        if (hide) islandSearch.style.setProperty('display', 'none', 'important');
        else islandSearch.style.removeProperty('display');
    }

    // --- CURRENCY & ANTI-TAMPER ---
    const paintUI = (currencyCode) => {
        const priceTag = document.querySelector('.price-big');
        if (priceTag) priceTag.innerText = currencyCode + " 0";
    };
    paintUI('USD');
    
    fetch('https://ipapi.co/json/')
        .then(r => r.json())
        .then(d => { paintUI(d.currency || 'USD'); })
        .catch(() => { paintUI('USD'); });

    // Anti-Tamper (Relaxed for the animation)
    const antiTamper = new MutationObserver((mutations) => {
        const landing = document.getElementById('premium-landing');
        // Only run tamper check if we are truly locked down AND not currently fading out
        if (document.body.classList.contains('premium-lockdown') && landing && landing.style.opacity !== '0') {
            if (landing.style.display === 'none') {
                 landing.setAttribute('style', 'display: flex !important;');
            }
        }
    });
    antiTamper.observe(document.documentElement, {
        childList: true, attributes: true, subtree: true, attributeFilter: ['style']
    });

})();
</script>
<style>
    /* --- NEW OTT SEQUENCE STYLES --- */
    .premium-processing {
        display: none; /* Hidden by default */
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 20;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.5s ease;
    }

    .premium-processing.active {
        opacity: 1;
        pointer-events: all;
    }

    /* Hide the card content smoothly */
    .premium-content {
        transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .premium-content.fade-out {
        opacity: 0;
        transform: scale(0.95);
        pointer-events: none;
    }

    /* Spinner Animation */
    .premium-loader {
        width: 40px;
        height: 40px;
        border: 3px solid rgba(255,255,255,0.1);
        border-radius: 50%;
        border-top-color: #fff;
        animation: spin 0.8s ease-in-out infinite;
        margin-bottom: 24px;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .premium-status-text {
        font-family: "Plus Jakarta Sans", sans-serif;
        font-size: 1.1rem;
        color: rgba(255,255,255,0.7);
        letter-spacing: 0.5px;
        font-weight: 400;
        text-transform: uppercase;
        font-size: 0.8rem;
    }
</style>


</body>
</html>