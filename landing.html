<!DOCTYPE html>
<html lang="en" dir="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Tuwa - Web player</title>

    <link rel="icon" type="image/png" sizes="128x128" href="https://raw.githubusercontent.com/Quran-lite-pages-dev/Quran-lite.pages.dev/refs/heads/master/assets/ui/web.png">
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/Quran-lite-pages-dev/Quran-lite.pages.dev/refs/heads/master/assets/ui/web.ico">
    <link rel="apple-touch-icon" href="assets/ui/apple-touch-icon.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;900&family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/a1b2c3d4e5f.css">
    <link rel="stylesheet" href="styles/f1a2b3c4d5e.css">
    
    <style>
        body { background: #000; overflow: hidden; margin: 0; padding: 0; height: 100vh; width: 100vw; }
        
        /* Slider Logic */
        #slider-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1), transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            transform: scale(1.05); /* Slight zoom effect for Apple-like feel */
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .slide.active {
            opacity: 1;
            visibility: visible;
            transform: scale(1);
            z-index: 2;
        }

        /* Fixed Overlay for Button and Brand so they stay in place */
        #fixed-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Let clicks pass through to background if needed */
            z-index: 50; /* Above slides */
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Space out brand (top) and button (bottom) */
            padding-bottom: 8vh; /* Lift button from bottom */
        }

        #fixed-overlay .interactive-element {
            pointer-events: auto; /* Re-enable clicks for buttons */
        }

        /* Center the button at bottom */
        .bottom-actions {
            display: flex;
            justify-content: center;
            width: 100%;
        }

        /* CRITICAL FIX: Hide content initially to prevent flashing the button */
        .premium-content { 
            /* opacity managed by slide now, but keeping for legacy script compatibility */
            transition: opacity 0.8s ease; 
        }

        /* Styling updates for the snippets provided */
        .heroz-title-text {
            font-family: var(--font-heading, "Plus Jakarta Sans", sans-serif);
            font-size: clamp(3rem, 6vw, 6rem);
            font-weight: 900;
            color: white;
            text-align: center;
            text-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .cinema-seek-indicator {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        .cinema-seek-indicator svg { width: 30px; height: 30px; }
        .cinema-seek-indicator.left { left: 40px; }
        .cinema-seek-indicator.right { right: 40px; }

    </style>
<script>
  (function() {
    // 1. Create a no-op function (does nothing)
    var noOp = function() {};

    // 2. Lock down console.log
    // writable: false -> cannot be reassigned (e.g., console.log = func)
    // configurable: false -> cannot be redefined or deleted
    Object.defineProperty(window.console, 'log', {
      value: noOp,
      writable: false,
      configurable: false
    });

    // Optional: Repeat for other console methods if you want total silence
    var methods = ['debug', 'info', 'warn', 'error', 'table', 'trace'];
    for (var i = 0; i < methods.length; i++) {
      if (window.console[methods[i]]) {
        Object.defineProperty(window.console, methods[i], {
          value: noOp,
          writable: false,
          configurable: false
        });
      }
    }
  })();
</script>
<script src="functions/login-client.js"></script>
<script>
(function() {
  const style = document.createElement('style');
  style.textContent = `
    /* Disable text selection across the whole app */
    html, body {
      user-select: none;
      -webkit-user-select: none;
      
      /* Disable 'rubber band' scrolling */
      overscroll-behavior: none;
      
      /* Optimize touch interactions */
      touch-action: manipulation;
      
      /* Remove mobile tap highlight flash */
      -webkit-tap-highlight-color: transparent;
    }

    /* Re-enable selection for inputs and textareas so users can still type */
    input, textarea, [contenteditable="true"] {
      user-select: text;
      -webkit-user-select: text;
    }
  `;
  document.head.appendChild(style);
})();
</script>
</head>
<body>
<script>
    const toggleBrandVisibility = () => {
        const brandLink = document.getElementById('brand-link');
        if (!brandLink) return;

        // Set your threshold (e.g., 768px for mobile/tablet)
        if (window.innerWidth < 768) {
            brandLink.style.display = 'none';
        } else {
            brandLink.style.display = 'flex'; // Or 'block' depending on layout
        }
    };

    // Run on initial load
    window.addEventListener('DOMContentLoaded', toggleBrandVisibility);
    // Run whenever the screen is resized
    window.addEventListener('resize', toggleBrandVisibility);
</script>

    <div id="fixed-overlay">
        <div style="padding: 20px; display: flex;">
             <div class="premium-brand-replica" style="position: absolute; top: 20px; left: 20px;">
                <img src="https://raw.githubusercontent.com/Quran-lite-pages-dev/Quran-lite.pages.dev/refs/heads/master/assets/ui/logo.png" alt="Tuwa Logo" class="lazyload">
                <span>Tuwa</span>
            </div>

            <div class="appx-brand" id="brand-link" aria-label="Tuwa Home" style="margin: 0 auto;">
                <div class="brand-icon">
                    <img src="https://raw.githubusercontent.com/Quran-lite-pages-dev/Quran-lite.pages.dev/refs/heads/master/assets/ui/logo.png" alt="Tuwa Logo">
                </div>
                <span class="brand-text">Tuwa</span>
            </div>
        </div>

        <div class="bottom-actions">
            <div class="interactive-element">
                <button id="premium-start-btn" class="premium-btn">
                    <span>Start watching now</span>
                    <svg 
                        class="btn-icon" 
                        aria-hidden="true" 
                        xmlns="http://www.w3.org/2000/svg" 
                        width="24" 
                        height="24" 
                        fill="none" 
                        viewBox="0 0 24 24"
                    >
                        <path 
                            stroke="currentColor" 
                            stroke-linecap="round" 
                            stroke-linejoin="round" 
                            stroke-width="2" 
                            d="m10 16 4-4-4-4"
                        />
                    </svg>
                </button>
            </div>
        </div>
    </div>


    <div id="slider-container">
        
        <div class="slide active" id="slide-1">
            <div class="premium-content visible" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
                
                <style>
                    .premium-title {
                        /* --- Base Text Styles --- */
                        font-family: var(--font-heading);
                        font-size: clamp(4.5rem, 8vw, 7.5rem);
                        font-weight: 900;
                        letter-spacing: -0.03em;
                        line-height: 1.1;
                        margin: 0 auto;
                        
                        /* --- Layout --- */
                        text-align: center;
                        width: 100%;
                        max-width: 1000px;
                    }

                    /* --- LINE 1: The Main Title (Keeps the Gradient) --- */
                    .premium-title .line-1 {
                        display: block; /* Forces own line */
                        
                        /* The Gradient Logic */
                        background: linear-gradient(180deg, #FFFFFF 10%, #888888 100%);
                        -webkit-background-clip: text;
                        background-clip: text;
                        -webkit-text-fill-color: transparent;
                    }

                    /* --- LINE 2: The Subtitle (Solid Color & Smaller) --- */
                    .premium-title .line-2 {
                        display: block; /* Forces own line */
                        
                        /* Visual Hierarchy */

                        letter-spacing: 0; /* Normal spacing for readability */
                        margin-top: 10px; /* Space between title and subtitle */

                        /* Override the parent gradient to make this solid color */
                        background: none; 
                        -webkit-text-fill-color: #999999; /* Solid Light Gray */
                        color: #999999;
                    }

                    /* --- Mobile Tweak --- */
                    @media (max-width: 768px) {
                        .premium-title {
                            font-size: clamp(2rem, 10vw, 3.5rem);
                        }
                        /* Optional: make subtitle slightly larger on mobile for readability */
                        .premium-title .line-2 {
                            font-size: 0.6em; 
                        }
                    }
                </style>

                <h1 class="premium-title">
                    <span class="line-1">Fulfillment</span>
                    <span class="line-2">not the feed</span>
                </h1>
                <p class="premium-subtitle"><b>1.5 Billion Daily Listeners</b></p>
                <h2></h2>
            </div>
        </div>

        <div class="slide" id="slide-2">
            <div class="loader-content" style="display: flex; flex-direction: column; align-items: center;">
                <div class="hero-shadow-overlay"></div>
                
                <h2 class="heroz-title-text" id="doors-hero-title">The Cleaving</h2>
                
                <div class="loader-spinner" style="display: none;"></div>
                <div class="loader-text" id="loader-text" style="display: none;"></div>

                <div id="seek-indicator-left" class="cinema-seek-indicator left">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"></path></svg>
                    <span>-10s</span>
                </div>
                <div id="seek-indicator-right" class="cinema-seek-indicator right">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6-8.5-6z"></path></svg>
                    <span>+10s</span>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-3">
             <div class="loader-content" style="display: flex; flex-direction: column; align-items: center;">
                <div class="hero-shadow-overlay"></div>
                
                <h2 class="heroz-title-text" id="doors-hero-title-moon">The Moon</h2>
                
                <div class="loader-spinner" style="display: none;"></div>
                <div class="loader-text" id="loader-text-moon" style="display: none;"></div>

                <div id="seek-indicator-left" class="cinema-seek-indicator left">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"></path></svg>
                    <span>-10s</span>
                </div>
                <div id="seek-indicator-right" class="cinema-seek-indicator right">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6-8.5-6z"></path></svg>
                    <span>+10s</span>
                </div>
            </div>
        </div>

    </div>

<style>
.premium-btn {
    /* 1. LAYOUT ESSENTIALS */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    
    /* 2. SIZING */
    padding: 12px 24px;
    width: 400px;
    max-width: 90vw; /* Safety for mobile */
    
    /* 3. VISUALS & POSITIONING */
    background: #fff;
        /* The Gradient Logic */
    color: #000;
    border: none;
    font-size: 1.5rem;
    font-family: var(--font-body);
    font-weight: 900;
    border-radius: 4px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(255, 255, 255, 0.15);
    position: relative;
    overflow: hidden;

    /* MOVE DOWN 10% OF ITS OWN HEIGHT - Adjusted because it's now in overlay */
    /* transform: translateY(10%);  */

    /* TRANSITION: Includes transform for smooth hover return */
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* 4. PREVENT ICON SQUISHING */
.premium-btn svg {
    flex-shrink: 0;
    transition: transform 0.3s ease;
}

/* 5. HOVER EFFECTS */
.premium-btn:hover {
    /* We override the 10% move on hover to lift it up slightly */
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 10px 20px rgba(255, 255, 255, 0.2);
    
    /* Text Gradient */
    background: linear-gradient(180deg, #FFFFFF 10%, #888888 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    
    color: #f2f2f2; 
    opacity: 0.9;
}

.premium-btn:hover svg {
    transform: translateX(4px);
}




/* 4. Extra Safety for very small screens (iPhone Mini / SE) */
@media (max-width: 320px) {
    .auth-card-title {
        font-size: 2.2rem;
        letter-spacing: -0.01em; /* Tight tracking looks messy on tiny screens */
    }
}


    .premium-subtitle {
    /* 1. Basic Fallbacks for Ancient Devices (Android 5/Legacy iOS) */
    font-family: var(--font-heading), sans-serif;
    color: #FFFFFF;    /* Fallback for when text-fill-color isn't understood */
    font-weight: 650;
    letter-spacing: -0.03em;
    line-height: 1.1;
    margin: 0;

    /* 2. Modern Responsive Sizing */
    /* Note: I fixed your clamp. Your 'min' was larger than your 'max' (4.5rem > 3.5rem) */
    font-size: clamp(0.5rem, 8vw, 2.5rem); 

    /* 3. The Gradient Effect */
    background: #FFFFFF; /* Solid color fallback */
    background: linear-gradient(180deg, #FFFFFF 10%, #888888 100%);
    
    /* Vendor prefixes for maximum compatibility */
    -webkit-background-clip: text;
    background-clip: text; 
    -webkit-text-fill-color: transparent;
}

@media (max-width: 768px) {
.premium-subtitle {
display: block;
    font-family: var(--font-body);
    font-size: 2.15rem;
    color: #a1a1a6;
    font-weight: 400;
    line-height: 1.5;
    margin: 0;

    /* Left Alignment Logic - DESKTOP */

    text-align: center;
        width: 90%;                  
    max-width: 900px; 
  }
}
/* 4. Extra Safety for very small screens (iPhone Mini / SE) */
@media (max-width: 320px) {
    .premium-subtitle {
        font-size: 2.2rem;
        letter-spacing: -0.01em; /* Tight tracking looks messy on tiny screens */
    }
}
</style>

        <div class="premium-processing">
            <div class="premium-loader"></div>
            <div class="premium-status-text" id="premium-status">Confirming availability</div>
        </div>
            





        <div id="legal-overlay" class="legal-backdrop">
            <div class="legal-glass-panel">
                <button class="legal-close" onclick="closeLegal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"></path></svg>
                </button>
                <div id="legal-content-area" class="legal-scroll-content"></div>
            </div>
        </div>
    


    <style>



        
        /* Standardized SVG sizing */
        .social-btn svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }
    </style>

    <div id="hybrid-auth-modal" style="background: rgba(0,0,0,0.8); padding: 40px; text-align: center;">
    <div class="auth-card">
        <h2 class="auth-card-title">Your bespoke premium content is on its way.</h2>
        <div id="auth-error"></div>

        <div id="auth-group-web" style="display: none; width: 100%; flex-direction: column; gap: 16px;">
            <button onclick="handleSocialLogin('google')" id="googleweb-btn" class="social-btn btn-google" style="font-size: 2rem; font-weight: 700;">
                <svg viewBox="0 0 18 18">
                    <path d="M17.64 9.2c0-.637-.057-1.252-.164-1.841H9v3.481h4.844a4.14 4.14 0 0 1-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z" fill="#4285F4"/>
                    <path d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.715H.957v2.332A8.997 8.997 0 0 0 9 18z" fill="#34A853"/>
                    <path d="M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332z" fill="#FBBC05"/>
                    <path d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z" fill="#EA4335"/>
                </svg>
                Continue with Google
            </button>

            <button onclick="handleSocialLogin('spotify')" class="social-btn btn-google" style="font-size: 2rem; font-weight: 700;">
<svg viewBox="0 0 512 512">
  <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm113.8 354.6c-4.5 7.4-13.8 9.9-21.3 5.4-58.3-33.5-131.7-41.1-218.3-22.5-8.5 2-17.1-3.3-19.1-11.8-2-8.5 3.3-17.1 11.8-19.1 94.6-20.3 175.7-11.4 241.6 26.3 7.4 4.5 9.9 13.8 5.4 21.3zm29.8-66.2c-5.6 9.2-17.3 12.1-26.4 6.5-66.9-41.1-168.9-53-248-29-10.2 3.1-21.2-2.5-24.2-12.7-3.1-10.2 2.5-21.2 12.7-24.2 90.6-27.4 204.6-13.7 282.1 33.9 9.1 5.6 12 17.3 6.5 26.4zM408.6 186c-80.4-47.8-213.1-52.2-290-28.8-12.4 3.8-25.5-3.1-29.3-15.5-3.8-12.4 3.1-25.5 15.5-29.3 89-27.1 235.4-21.9 328.6 33.5 11.2 6.6 14.9 21.2 8.3 32.4-6.6 11.2-21.2 14.9-32.4 8.3z"/>
</svg>
                Continue with Spotify
            </button>

            <button onclick="handleSocialLogin('discord')" class="social-btn btn-google" style="font-size: 2rem; font-weight: 700;">
                <svg viewBox="0 0 512 365">
                    <path fill="currentColor" d="M378.186 365.028s-15.794-18.865-28.956-35.099c57.473-16.232 79.41-51.77 79.41-51.77-17.989 11.846-35.099 20.182-50.454 25.885-21.938 9.213-42.997 14.917-63.617 18.866-42.118 7.898-80.726 5.703-113.631-.438-25.008-4.827-46.506-11.407-64.494-18.867-10.091-3.947-21.059-8.774-32.027-14.917-1.316-.877-2.633-1.316-3.948-2.193-.877-.438-1.316-.878-1.755-.878-7.898-4.388-12.285-7.458-12.285-7.458s21.06 34.659 76.779 51.331c-13.163 16.673-29.395 35.977-29.395 35.977C36.854 362.395 0 299.218 0 299.218 0 159.263 63.177 45.633 63.177 45.633 126.354-1.311 186.022.005 186.022.005l4.388 5.264C111.439 27.645 75.461 62.305 75.461 62.305s9.653-5.265 25.886-12.285c46.945-20.621 84.236-25.885 99.592-27.64 2.633-.439 4.827-.878 7.458-.878 26.763-3.51 57.036-4.387 88.624-.878 41.68 4.826 86.43 17.111 132.058 41.68 0 0-34.66-32.906-109.244-55.281l6.143-7.019s60.105-1.317 122.844 45.628c0 0 63.178 113.631 63.178 253.585 0-.438-36.854 62.739-133.813 65.81l-.001.001zm-43.874-203.133c-25.006 0-44.75 21.498-44.75 48.262 0 26.763 20.182 48.26 44.75 48.26 25.008 0 44.752-21.497 44.752-48.26 0-26.764-20.182-48.262-44.752-48.262zm-160.135 0c-25.008 0-44.751 21.498-44.751 48.262 0 26.763 20.182 48.26 44.751 48.26 25.007 0 44.75-21.497 44.75-48.26.439-26.763-19.742-48.262-44.75-48.262z"/>
                </svg>
                Continue with Discord
            </button>
        </div>

        <div id="auth-group-tv" style="display: none; width: 100%;">
            <button onclick="Android.startGoogleLogin()" class="social-btn btn-google" style="font-size: 2rem; font-weight: 700;">
                <svg viewBox="0 0 18 18">
                    <path d="M17.64 9.2c0-.637-.057-1.252-.164-1.841H9v3.481h4.844a4.14 4.14 0 0 1-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z" fill="#4285F4"/>
                    <path d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.715H.957v2.332A8.997 8.997 0 0 0 9 18z" fill="#34A853"/>
                    <path d="M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332z" fill="#FBBC05"/>
                    <path d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z" fill="#EA4335"/>
                </svg>
                Continue with Google
            </button>
        </div>

        <div style="display: none; margin-top:20px; font-size:0.8rem; color:#888; cursor:pointer;" onclick="closeAuth()">Cancel</div>
    </div>
</div>

<script>
    (function() {
        // CHANGED: Use .includes() to allow combined formats like ?tv+mb
        const search = window.location.search;
        const isTvMode = search.includes('tv');

        const webGroup = document.getElementById('auth-group-web');
        const tvGroup = document.getElementById('auth-group-tv');

        if (isTvMode) {
            // Case: URL contains "tv" -> Show Android/TV Button only
            if(tvGroup) tvGroup.style.display = 'block';
            if(webGroup) webGroup.style.display = 'none';
        } else {
            // Case: URL does NOT contain "tv" -> Show Web/Discord Buttons
            if(tvGroup) tvGroup.style.display = 'none';
            if(webGroup) webGroup.style.display = 'flex'; 
        }
    })();
</script>
<style>
/* Target the SVGs inside your buttons */
.social-btn svg {
    width: 18px; /* Adjust size as needed */
    height: 18px;
    vertical-align: middle;
    margin-right: 10px;
    
    /* 1. Force the icon to be white */
    /* fill: white; works for most, but filter is a 'nuclear' option for multi-color SVGs */
    filter: brightness(0) invert(1) 
            drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.5));
}


</style>


    <style>
        .legal-backdrop { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 9995; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); opacity: 0; pointer-events: none; transition: opacity 0.4s; display: flex; align-items: center; justify-content: center; }
        .legal-backdrop.active { opacity: 1; pointer-events: all; }
        .legal-glass-panel { width: 90%; max-width: 600px; height: 80vh; background: rgba(20, 20, 20, 0.6); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 24px; box-shadow: 0 40px 80px rgba(0,0,0,0.8); transform: scale(0.95) translateY(20px); transition: transform 0.5s; position: relative; overflow: hidden; display: flex; flex-direction: column; }
        .legal-backdrop.active .legal-glass-panel { transform: scale(1) translateY(0); }
        .legal-scroll-content { padding: 40px; overflow-y: auto; color: #f0f0f0; font-family: "Plus Jakarta Sans", sans-serif; font-size: 1.4rem; line-height: 1.8; }
        .legal-close { position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.1); border: none; border-radius: 50%; width: 36px; height: 36px; color: #fff; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.2s; z-index: 10; }
        
        #hybrid-auth-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 2147483647; display: none; justify-content: center; align-items: center; backdrop-filter: blur(15px); opacity: 0; transition: opacity 0.4s ease; }
        #hybrid-auth-modal.visible { opacity: 1; pointer-events: all; }
.auth-card {
  /* 1. FORCE Full Screen (Break out of any parent containers) */
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;  /* Anchors to right edge */
  bottom: 0 !important; /* Anchors to bottom edge */
  
  width: 100vw !important;  /* Forces full Viewport Width */
  height: 100vh !important; /* Forces full Viewport Height */
  z-index: 99999 !important; /* Ensures it is on top of EVERYTHING */

  /* 2. Aesthetics & Reset */
  background: rgba(20, 20, 20, 1) !important;
  box-sizing: border-box !important;
  margin: 0 !important;
  padding: 20px !important; /* Comfortable padding for mobile */
  
  border: none !important;
  border-radius: 0 !important; /* Removes those rounded corners from the screenshot */
  box-shadow: none !important;
  transform: none !important;

  /* 3. Perfect Centering */
  display: flex !important;
  flex-direction: column !important;
  justify-content: center !important;
  align-items: center !important;
  text-align: center !important; /* Ensures text inside is centered, not left-aligned */
  gap: 16px !important;

  /* 4. Mobile Safety (Prevents "Scrapped" look) */
  overflow-y: auto !important; /* Allows scrolling if screen is too small */
}

/* 5. VITAL: Prevent the inner content from breaking mobile screens */
.auth-card > * {
  max-width: 100% !important; /* Prevents buttons/text from being wider than the phone screen */
  flex-shrink: 1; /* Allows content to shrink if needed */
}
        #hybrid-auth-modal.visible .auth-card { transform: scale(1); }
        .social-btn { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); cursor: pointer; font-size: 2rem; font-weight: 900; display: flex; align-items: center; justify-content: center; gap: 10px; transition: transform 0.2s, background 0.2s; color: #fff; font-family: 'Inter', sans-serif; }
        .social-btn:hover { transform: scale(1.02); }
        .btn-google { background: linear-gradient(180deg, #FFFFFF 10%, #888888 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; color: #000; }
        
        .premium-processing { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; flex-direction: column; align-items: center; justify-content: center; z-index: 9999; opacity: 0; transition: opacity 0.6s cubic-bezier(0.2, 0, 0, 1); background: rgba(5, 5, 5, 0.85); backdrop-filter: blur(40px) saturate(120%); }
        .premium-processing.active { display: flex; opacity: 1; }
        
        .premium-loader { width: 50px; height: 50px; border-radius: 50%; background: conic-gradient(from 0deg, transparent 0%, rgba(255,255,255,0.1) 50%, #fff 100%); -webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 2px), #fff calc(100% - 2px + 0.5px)); mask: radial-gradient(farthest-side, transparent calc(100% - 2px), #fff calc(100% - 2px + 0.5px)); animation: cinema-spin 1s linear infinite; margin-bottom: 24px; box-shadow: 0 0 30px rgba(255,255,255,0.05); }
        @keyframes cinema-spin { to { transform: rotate(360deg); } }
        .premium-status-text { animation: text-pulse 2s ease-in-out infinite; transition: opacity 0.3s ease; font-family: "Plus Jakarta Sans", "Inter", sans-serif; font-size: 1.2rem; font-weight: 500; letter-spacing: 0.15em; color: rgba(255, 255, 255, 0.9); text-transform: uppercase; text-align: center; }
        @keyframes text-pulse { 0%, 100% { opacity: 0.6; } 50% { opacity: 1; text-shadow: 0 0 15px rgba(255,255,255,0.3); } }
    </style>
<style>

    #hybrid-auth-modal {

        position: fixed; top: 0; left: 0; width: 100%; height: 100%;

        background: rgba(0,0,0,0.85); z-index: 2147483647;

        display: none; justify-content: center; align-items: center;

        backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);

        opacity: 0; transition: opacity 0.4s ease;

    }

    #hybrid-auth-modal.visible { opacity: 1; pointer-events: all; }

    

    .auth-card {

        background: rgba(20, 20, 20, 0.8);

        border: 1px solid rgba(255, 255, 255, 0.1);

        border-radius: 24px; padding: 40px; width: 90%; max-width: 400px;

        text-align: center; box-shadow: 0 40px 80px rgba(0,0,0,1);

        display: flex; flex-direction: column; gap: 12px;

        transform: scale(0.95); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);

    }

    #hybrid-auth-modal.visible .auth-card { transform: scale(1); }

    .auth-card-title {
    /* 1. Basic Fallbacks for Ancient Devices (Android 5/Legacy iOS) */
    font-family: var(--font-heading), sans-serif;
    font-size: 3.5rem; /* Fallback for when clamp() isn't understood */
    color: #FFFFFF;    /* Fallback for when text-fill-color isn't understood */
    font-weight: 800;
    letter-spacing: -0.03em;
    line-height: 1.1;
    margin: 0;

    /* 2. Modern Responsive Sizing */
    /* Note: I fixed your clamp. Your 'min' was larger than your 'max' (4.5rem > 3.5rem) */
    font-size: clamp(2.5rem, 8vw, 4.5rem); 

    /* 3. The Gradient Effect */
    background: #FFFFFF; /* Solid color fallback */
    background: linear-gradient(180deg, #FFFFFF 10%, #888888 100%);
    
    /* Vendor prefixes for maximum compatibility */
    -webkit-background-clip: text;
    background-clip: text; 
    -webkit-text-fill-color: transparent;
}

/* 4. Extra Safety for very small screens (iPhone Mini / SE) */
@media (max-width: 320px) {
    .auth-card-title {
        font-size: 2.2rem;
        letter-spacing: -0.01em; /* Tight tracking looks messy on tiny screens */
    }
}






    .social-btn {

        width: 100%; padding: 14px; border-radius: 12px;

        border: 1px solid rgba(255,255,255,0.1);

        cursor: pointer; font-size: 1rem; font-weight: 600;

        display: flex; align-items: center; justify-content: center; gap: 10px;

        transition: transform 0.2s, background 0.2s;

        color: #fff; font-family: 'Inter', sans-serif;

    }

    .social-btn:hover { transform: scale(1.02); }

    

    /* Brand Colors */

    .btn-google { background: linear-gradient(180deg, #FFFFFF 10%, #888888 100%); 

-webkit-background-clip: text; 

-webkit-text-fill-color: transparent; 

color: #000; }

    .btn-spotify { display: none; background: #1DB954; color: #fff; }

    .btn-facebook { display: none; background: #1877F2; color: #fff; }

    .btn-discord { background: linear-gradient(180deg, #FFFFFF 10%, #888888 100%); 

-webkit-background-clip: text; 

-webkit-text-fill-color: transparent; 

color: #000; }

    .btn-x { display: none; background: #000; border-color: #333; color: #fff; }



    #auth-error { color: #ff4444; font-size: 0.9rem; margin-top: 10px; min-height: 1.2em; display:none;}

    .divider { display: flex; align-items: center; color: #555; margin: 10px 0; font-size: 0.8rem; }

    .divider::before, .divider::after { content: ''; flex: 1; height: 1px; background: #333; }

    .divider span { padding: 0 10px; }

</style>


<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
    (async function() {
        const SUPABASE_URL = 'https://csuyapzneytubzdrdegl.supabase.co'; 
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNzdXlhcHpuZXl0dWJ6ZHJkZWdsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk3MzM1MzMsImV4cCI6MjA4NTMwOTUzM30.m5lhtxB-9Wutmt1E-3mlO8R0KlgE8YNXaPP1_UJF2k0';
        
        // [Currency map omitted for brevity - keep your existing one]
                
        const COUNTRY_TO_CURRENCY = { "AF": "AFN", "AL": "ALL", "DZ": "DZD", "AS": "USD", "AD": "EUR", "AO": "AOA", "AI": "XCD", "AQ": "USD", "AG": "XCD", "AR": "ARS", "AM": "AMD", "AW": "AWG", "AU": "AUD", "AT": "EUR", "AZ": "AZN", "BS": "BSD", "BH": "BHD", "BD": "BDT", "BB": "BBD", "BY": "BYN", "BE": "EUR", "BZ": "BZD", "BJ": "XOF", "BM": "BMD", "BT": "BTN", "BO": "BOB", "BQ": "USD", "BA": "BAM", "BW": "BWP", "BV": "NOK", "BR": "BRL", "IO": "USD", "BN": "BND", "BG": "BGN", "BF": "XOF", "BI": "BIF", "CV": "CVE", "KH": "KHR", "CM": "XAF", "CA": "CAD", "KY": "KYD", "CF": "XAF", "TD": "XAF", "CL": "CLP", "CN": "CNY", "CX": "AUD", "CC": "AUD", "CO": "COP", "KM": "KMF", "CD": "CDF", "CG": "XAF", "CK": "NZD", "CR": "CRC", "HR": "EUR", "CU": "CUP", "CW": "ANG", "CY": "EUR", "CZ": "CZK", "CI": "XOF", "DK": "DKK", "DJ": "DJF", "DM": "XCD", "DO": "DOP", "EC": "USD", "EG": "EGP", "SV": "USD", "GQ": "XAF", "ER": "ERN", "EE": "EUR", "SZ": "SZL", "ET": "ETB", "FK": "FKP", "FO": "DKK", "FJ": "FJD", "FI": "EUR", "FR": "EUR", "GF": "EUR", "PF": "XPF", "TF": "EUR", "GA": "XAF", "GM": "GMD", "GE": "GEL", "DE": "EUR", "GH": "GHS", "GI": "GIP", "GR": "EUR", "GL": "DKK", "GD": "XCD", "GP": "EUR", "GU": "USD", "GT": "GTQ", "GG": "GBP", "GN": "GNF", "GW": "XOF", "GY": "GYD", "HT": "HTG", "HM": "AUD", "VA": "EUR", "HN": "HNL", "HK": "HKD", "HU": "HUF", "IS": "ISK", "IN": "INR", "ID": "IDR", "IR": "IRR", "IQ": "IQD", "IE": "EUR", "IM": "GBP", "IL": "ILS", "IT": "EUR", "JM": "JMD", "JP": "JPY", "JE": "GBP", "JO": "JOD", "KZ": "KZT", "KE": "KES", "KI": "AUD", "KP": "KPW", "KR": "KRW", "KW": "KWD", "KG": "KGS", "LA": "LAK", "LV": "EUR", "LB": "LBP", "LS": "LSL", "LR": "LRD", "LY": "LYD", "LI": "CHF", "LT": "EUR", "LU": "EUR", "MO": "MOP", "MG": "MGA", "MW": "MWK", "MY": "MYR", "MV": "MVR", "ML": "XOF", "MT": "EUR", "MH": "USD", "MQ": "EUR", "MR": "MRU", "MU": "MUR", "YT": "EUR", "MX": "MXN", "FM": "USD", "MD": "MDL", "MC": "EUR", "MN": "MNT", "ME": "EUR", "MS": "XCD", "MA": "MAD", "MZ": "MZN", "MM": "MMK", "NA": "NAD", "NR": "AUD", "NP": "NPR", "NL": "EUR", "NC": "XPF", "NZ": "NZD", "NI": "NIO", "NE": "XOF", "NG": "NGN", "NU": "NZD", "NF": "AUD", "MK": "MKD", "MP": "USD", "NO": "NOK", "OM": "OMR", "PK": "PKR", "PW": "USD", "PS": "ILS", "PA": "PAB", "PG": "PGK", "PY": "PYG", "PE": "PEN", "PH": "PHP", "PN": "NZD", "PL": "PLN", "PT": "EUR", "PR": "USD", "QA": "QAR", "RE": "EUR", "RO": "RON", "RU": "RUB", "RW": "RWF", "BL": "EUR", "SH": "SHP", "KN": "XCD", "LC": "XCD", "MF": "EUR", "PM": "EUR", "VC": "XCD", "WS": "WST", "SM": "EUR", "ST": "STN", "SA": "SAR", "SN": "XOF", "RS": "RSD", "SC": "SCR", "SL": "SLE", "SG": "SGD", "SX": "ANG", "SK": "EUR", "SI": "EUR", "SB": "SBD", "SO": "SOS", "ZA": "ZAR", "GS": "GBP", "SS": "SSP", "ES": "EUR", "LK": "LKR", "SD": "SDG", "SR": "SRD", "SJ": "NOK", "SE": "SEK", "CH": "CHF", "SY": "SYP", "TW": "TWD", "TJ": "TJS", "TZ": "TZS", "TH": "THB", "TL": "USD", "TG": "XOF", "TK": "NZD", "TO": "TOP", "TT": "TTD", "TN": "TND", "TR": "TRY", "TM": "TMT", "TC": "USD", "TV": "AUD", "UG": "UGX", "UA": "UAH", "AE": "AED", "GB": "GBP", "US": "USD", "UM": "USD", "UY": "UYU", "UZ": "UZS", "VU": "VUV", "VE": "VES", "VN": "VND", "VG": "USD", "VI": "USD", "WF": "XPF", "EH": "MAD", "YE": "YER", "ZM": "ZMW", "ZW": "ZWG" };

        let supabase = null;
        try {
            if (window.supabase) {
                const { createClient } = window.supabase;
                supabase = createClient(SUPABASE_URL, SUPABASE_KEY);
            }
        } catch (e) { console.error("Supabase Init Error", e); }

        const startBtn = document.getElementById('premium-start-btn');
        const authModal = document.getElementById('hybrid-auth-modal');
        const premiumContent = document.querySelector('.premium-content'); // Keeping reference for legacy logic
        const premiumProcessing = document.querySelector('.premium-processing');
        const statusText = document.getElementById('premium-status');

        // --- LOOP PREVENTION MECHANISM ---
        // We check sessionStorage to see if we recently tried to activate.
        const LOOP_PROTECTION_KEY = 'tuwa_activation_attempt';





        // Check Auth
        if (supabase) {
            const { data } = await supabase.auth.getSession();
            if (data && data.session) {
                initializePostLogin();
            } else {
                initializeGuest();
            }
        } else {
            initializeGuest();
        }

function initializeGuest() {
            // Updated: premiumContent is now inside a slide, visibility handled by CSS transition of slide
            // if (premiumContent) premiumContent.classList.add('visible');
            
            if (startBtn) {
                // CHANGED: Use innerHTML so the browser renders the SVG
                startBtn.innerHTML = `<span>Start watching now</span><svg 
                    class="btn-icon" 
                    aria-hidden="true" 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="24" 
                    height="24" 
                    fill="none" 
                    viewBox="0 0 24 24"
                >
                    <path 
                        stroke="currentColor" 
                        stroke-linecap="round" 
                        stroke-linejoin="round" 
                        stroke-width="2" 
                        d="m10 16 4-4-4-4"
                    />
                </svg>`;
                
                startBtn.onclick = () => {
                    authModal.style.display = 'flex';
                    setTimeout(() => authModal.classList.add('visible'), 10);
                };

                // --- NEW: AUTO-TRIGGER LOGIC ---
                // Detect 'mb' in URL search (?mb, ?tv+mb) OR path (/mb)
                const search = window.location.search;
                const path = window.location.pathname;

                if (search.includes('mb') || path.includes('/mb')) {
                    // Trigger the click immediately so the modal opens on load
                    startBtn.click();
                }
                // ------------------------------
            }
        }

        function initializePostLogin() {
            // === CIRCUIT BREAKER ===
            // Check if we tried to activate in the last 15 seconds
            const lastAttempt = sessionStorage.getItem(LOOP_PROTECTION_KEY);
            const now = Date.now();

            if (lastAttempt && (now - parseInt(lastAttempt) < 15000)) {
                console.warn("Loop detected. Stopping auto-sequence.");
                
                // STOP THE LOOP: Show the content instead of the loader
                premiumProcessing.classList.remove('active');
                if (premiumContent) premiumContent.classList.add('visible');
                
                // Change the button to a "Manual Retry" state
                if (startBtn) {
                    startBtn.innerText = "Click to Enter";
                    startBtn.onclick = async () => {
                        startBtn.innerText = "Entering...";
                        // Force manual activation attempt
                        await performActivation(); 
                    };
                }
                return; // Exit function, do not run sequence
            }

            // If no loop detected, proceed as normal
            runOTTSequence();
        }

        async function performActivation() {
            try {
                // 1. Call the server to set the cookie
                const response = await fetch('/login', { method: 'POST' });
                
                if (response.ok) {
                    // 2. Set the timestamp BEFORE reloading to catch loops
                    sessionStorage.setItem(LOOP_PROTECTION_KEY, Date.now());
                    
                    // 3. Reload
                    window.location.href = "/?t=" + new Date().getTime();
                } else {
                    alert("Activation not responding. Please refresh.");
                }
            } catch (e) {
                console.error("Activation Error", e);
                alert("Connection failed. Please try again.");
            }
        }

        async function runOTTSequence() {
            premiumProcessing.classList.add('active');

            const steps = [
                { text: "Confirming subscription", delay: 800 },
                { text: "Verifying your device", delay: 2000 },
                { text: "Personalizing your library", delay: 3800 },
                { text: "Welcome to Tuwa", delay: 6500 }
            ];

            steps.forEach(step => {
                setTimeout(() => {
                    if (statusText) {
                        statusText.style.opacity = 0; 
                        setTimeout(() => {
                            statusText.innerText = step.text;
                            statusText.style.opacity = 1;
                        }, 200);
                    }
                }, step.delay);
            });

            // Trigger activation at the end of the sequence
            setTimeout(() => {
                performActivation();
            }, 7200);
        }

        window.handleSocialLogin = async (provider) => {
            if (!supabase) return;
            try {
                const { error } = await supabase.auth.signInWithOAuth({
                    provider: provider,
                    options: { redirectTo: window.location.href }
                });
                if (error) throw error;
            } catch (err) { console.error(err); }
        };

        window.closeAuth = () => {
            authModal.classList.remove('visible');
            setTimeout(() => authModal.style.display = 'none', 300);
        };
        
        window.openLegal = (type) => { };
        window.closeLegal = () => document.getElementById('legal-overlay').classList.remove('active');
    })();
    </script>
<script src="src/components/nav_7c6b5a.js"></script> 
<script>
(function() {
    'use strict';

    // CONFIGURATION
    const TARGET_CLASS = 'brand-icon';

    // 1. Inject CSS for the "Invisible Shield"
    // This creates a layer on top of the image that intercepts all clicks/drags.
    const style = document.createElement('style');
    style.innerHTML = `
        .${TARGET_CLASS} {
            position: relative !important; /* Anchors the shield */
            -webkit-user-select: none !important;
            -moz-user-select: none !important;
            -ms-user-select: none !important;
            user-select: none !important;
        }
        
        /* The Shield */
        .${TARGET_CLASS}::after {
            content: '' !important;
            display: block !important;
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            z-index: 100 !important; /* Sit on top of the image */
            background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7') !important; /* 1x1 transparent gif trick for IE/Old browsers */
        }

        /* Hide the image from print selection if possible */
        @media print {
            .${TARGET_CLASS} img {
                display: none !important;
            }
            .${TARGET_CLASS}::after {
                content: 'Protected Image';
                display: block;
                border: 1px dashed #ccc;
            }
        }
    `;
    document.head.appendChild(style);

    // 2. JavaScript Event Blockers
    // We attach these to the CONTAINER, which now holds the shield.
    function protectSafe() {
        const containers = document.querySelectorAll(`.${TARGET_CLASS}`);

        containers.forEach(div => {
            // Disable native dragging on the image tag underneath
            const img = div.querySelector('img');
            if (img) {
                img.setAttribute('draggable', 'false');
                img.style.pointerEvents = 'none'; // Ensures clicks pass to the ::after shield or container
            }

            // Block Right Click
            div.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }, true);

            // Block Drag Start
            div.addEventListener('dragstart', (e) => {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }, true);

            // Block Copy
            div.addEventListener('copy', (e) => {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }, true);
            
            // Block Touch/Long-press on mobile
            div.style.webkitTouchCallout = 'none';
        });
    }

    // Run immediately
    protectSafe();

    // Watch for new content (e.g. infinite scroll or dynamic loading)
    new MutationObserver(protectSafe).observe(document.body, { childList: true, subtree: true });

})();
</script>
<script>
    // 1. RECEIVER: This is the function MainActivity.java calls
    window.onNativeLoginSuccess = function(idToken) {
        console.log("Received Token from Android. Verifying with Cloudflare...");
        
        // Show a loading state if you have one (optional)
        // document.body.style.opacity = "0.5";

        // Send the token to your Cloudflare Backend Function
        fetch('/login-google', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ token: idToken })
        })
        .then(response => {
            if (response.ok) {
                console.log("Login Verified! Refreshing to load Premium App...");
                // Reload. The Middleware will now see the cookie and serve app.html
                window.location.reload();
            } else {
                console.error("Verification failed on server.");
                alert("Login failed. Please try again.");
            }
        })
        .catch(err => {
            console.error("Network error:", err);
            alert("Network error. Check your connection.");
        });
    };

    // 2. SENDER: Trigger the Android Native Login when button is clicked
    // Make sure your HTML button has id="loginButton"
    const loginBtn = document.getElementById('loginButton');
    
    if (loginBtn) {
        loginBtn.addEventListener('click', (e) => {
            e.preventDefault(); // Stop standard web navigation
            
            // Check if we are running inside the Android TV App
            if (window.Android && window.Android.startGoogleLogin) {
                console.log("Triggering Android Native Login...");
                window.Android.startGoogleLogin();
            } else {
                console.warn("Android Interface not found. Are you on a browser?");
                alert("Please use this app on your Android TV device.");
            }
        });
    } else {
        // console.error("Critical: #loginButton not found in HTML. Login will not work.");
        // Suppressed error since we are on the landing page primarily
    }
</script>
<script>
(function() {
  // Helper function to check if a specific cookie exists
  function hasCookie(name) {
    return document.cookie.split(';').some(c => c.trim().startsWith(name + '='));
  }

  // 1. Check the URL for the specific keyword
  if (window.location.href.includes("Unable+to+exchange+external+code")) {
    
    // 2. Cross-verify if the AUTH_GOOGLE cookie exists
    // We also check that TUWA_PREMIUM isn't already set to prevent an infinite reload loop
    if (hasCookie("AUTH_GOOGLE") && !hasCookie("TUWA_PREMIUM")) {
      
      // Set the premium cookie
      document.cookie = "TUWA_PREMIUM=true; path=/; max-age=31536000";
      console.log("Premium cookie set. Refreshing page...");
      
      // Force refresh the page
      window.location.reload();
      
      // Stop further execution in this thread since the page is reloading
      return; 
    }
  }

  // 3. Wait for the DOM to be fully loaded to attach the button listener
  document.addEventListener("DOMContentLoaded", function() {
    const googleBtn = document.getElementById("googleweb-btn");

    if (googleBtn) {
      googleBtn.addEventListener("click", function() {
        // Inject the AUTH_GOOGLE cookie upon clicking
        document.cookie = "AUTH_GOOGLE=true; path=/; max-age=31536000"; 
        console.log("AUTH_GOOGLE cookie set");
      });
    } else {
      console.warn("Element 'googleweb-btn' not found on this page.");
    }
  });
})();
</script>

<script>
(function() {
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;
    let isTransitioning = false;
    let touchStartY = 0;
    let touchEndY = 0;

    // Core function to switch slides
    function goToSlide(index) {
        if (isTransitioning) return;
        
        // Loop logic
        let nextIndex = index;
        if (index >= totalSlides) nextIndex = 0;
        if (index < 0) nextIndex = totalSlides - 1;

        if (nextIndex === currentSlide) return;

        isTransitioning = true;
        
        // Remove active class from all
        slides.forEach(s => s.classList.remove('active'));
        
        // Add active to next
        slides[nextIndex].classList.add('active');
        
        currentSlide = nextIndex;

        // Reset lock after transition time (1.2s matches CSS)
        setTimeout(() => {
            isTransitioning = false;
        }, 1200);
    }

    // 1. Mouse Wheel Handler
    window.addEventListener('wheel', (e) => {
        if (isTransitioning) return;
        // Threshold to prevent accidental jitters
        if (Math.abs(e.deltaY) > 20) {
            if (e.deltaY > 0) {
                goToSlide(currentSlide + 1);
            } else {
                goToSlide(currentSlide - 1);
            }
        }
    }, { passive: true });

    // 2. Touch Event Handlers (Swipe)
    window.addEventListener('touchstart', (e) => {
        touchStartY = e.changedTouches[0].screenY;
    }, { passive: true });

    window.addEventListener('touchend', (e) => {
        if (isTransitioning) return;
        touchEndY = e.changedTouches[0].screenY;
        handleSwipe();
    }, { passive: true });

    function handleSwipe() {
        const diff = touchStartY - touchEndY;
        // Threshold for swipe
        if (Math.abs(diff) > 50) {
            if (diff > 0) {
                // Swiped Up -> Next
                goToSlide(currentSlide + 1);
            } else {
                // Swiped Down -> Prev
                goToSlide(currentSlide - 1);
            }
        }
    }
})();
</script>

</body>
</html>